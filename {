Script started on 2025-08-01 18:32:22+00:00 [TERM="xterm" TTY="/dev/pts/1" COLUMNS="135" LINES="43"]
[?2004h]0;root@ip-172-31-2-231: /home/ubuntu/KubeBridgeroot@ip-172-31-2-231:/home/ubuntu/KubeBridge# clear
[?2004l[H[2J[3J[?2004h]0;root@ip-172-31-2-231: /home/ubuntu/KubeBridgeroot@ip-172-31-2-231:/home/ubuntu/KubeBridge# ls
[?2004l Dockerfile   Jenkinsfile  "Jenkinsfile'"   app.py   [0m[01;34mk8s[0m   kubectl   [01;34mterraform[0m  '{'
[?2004h]0;root@ip-172-31-2-231: /home/ubuntu/KubeBridgeroot@ip-172-31-2-231:/home/ubuntu/KubeBridge# rm [7mJenkinsfile[27mJenkinsfile
[?2004l[?2004h]0;root@ip-172-31-2-231: /home/ubuntu/KubeBridgeroot@ip-172-31-2-231:/home/ubuntu/KubeBridge# nano [7mJenkinsfile[27mJenkinsfile
[?2004l[?2004h[?1049h[22;0;0t[1;43r(B[m[4l[?7h[39;49m[?1h=[?1h=[?25l[39;49m(B[m[H[2J[41;62H(B[0;7m[ New File ](B[m[H(B[0;7m  GNU nano 7.2                                                  Jenkinsfile                                                            [1;134H(B[m[42d(B[0;7m^G(B[m Help[42;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut[42;65H(B[0;7m^T(B[m Execute[81G(B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[42;113H(B[0;7mM-A(B[m Set Mark[43d(B[0;7m^X(B[m Exit[43;17H(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace[49G(B[0;7m^U(B[m Paste[43;65H(B[0;7m^J(B[m Justify[81G(B[0;7m^/(B[m Go To Line   (B[0;7mM-E(B[m Redo[43;113H(B[0;7mM-6(B[m Copy[2d[?12l[?25h[?25l[41d[K[1;77H(B[0;7m*[134G(B[m[2;25Hexport AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}[3;25Hexport AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}[4;25Hexport AWS_DEFAULT_REGION=ap-south-1[6;25Haws eks update-kubeconfig --name vkr-cluster --region ap-south-1[8;25Hkubectl set image deployment/flaskapp flaskapp=${DOCKER_IMAGE}:${IMAGE_TAG} -n ${KUBE_NAMESPACE}[9;21H'''[10;17H}[11;13H}[12;9H}[13;5H}[15dpost {[16dfailure {[17;13Hecho 'Build or deployment failed!'[18;9H}[19;5H}[20d}[21d[?12l[?25h[?25l[?12l[?25h[18d[?25l[?12l[?25h[15d[?25l[?12l[?25h[12d[?25l[?12l[?25h[9d[?25l[?12l[?25h[6d[?25l[?12l[?25h[3d[?25l[?12l[?25h[2;41r[2;1H[2T[1;43r[2;17HwithCredentials([usernamePassword(credentialsId: 'aws-credentials', usernameVariable: 'AWS_ACCESS_KEY_ID', passwordVar(B[0;7m>[3;21H(B[msh '''[A[?25l[?12l[?25h7[2;41r8[3T[1;43r[3;9Hstage('Deploy to Kubernetes') {[4;13Hsteps {[2d[?25l[?12l[?25h7[2;41r8[3T[1;43r[2;17H}[3;13H}[4;9H}[2d[?25l[?12l[?25h7[2;41r8[3T[1;43r[2;21Hsh "docker build -t ${DOCKER_IMAGE}:${IMAGE_TAG} ."[3;21Hsh "echo $DOCKER_HUB_CREDENTIALS_PSW | docker login -u $DOCKER_HUB_CREDENTIALS_USR --password-stdin"[4;21Hsh "docker push ${DOCKER_IMAGE}:${IMAGE_TAG}"[2d[?25l[?12l[?25h7[2;41r8[3T[1;43r[2;9Hstage('Docker Build & Push') {[3;13Hsteps {[4;17Hscript {[2d[?25l[?12l[?25h7[2;41r8[6T[1;43r[2;9Hstage('Checkout') {[3;13Hsteps {[4;17Hgit '(B[0;1m[34mhttps://github.com/yourusername/your-flask-repo.git'[5;13H[39m(B[m}[6;9H}[2d[?25l[?12l[?25h7[2;40r8[3T[1;43r[2;5H}[4dstages {[2d[?25l[?12l[?25h7[2;40r8[3T[1;43r[2;9HDOCKER_IMAGE = 'vishnukrajan007/flaskapp'[3;9HIMAGE_TAG = 'latest'[4;9HKUBE_NAMESPACE = 'default'  // Change if your namespace is different[2d[?25l[?12l[?25h7[2;40r8[3T[1;43r[2;5Hagent any[4;5Henvironment {[2d[?25l[?12l[?25h7[2;40r8M[1;43r[2;1Hpipeline {[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[5d[?25l[?12l[?25h[8d[?25l[42;17H[17X[42;34H(B[0;7mM-D(B[m DOS Format       [42;65H  (B[0;7mM-A(B[m Append[23X[42;100H(B[0;7mM-B(B[m Backup File[K[43;2H(B[0;7mC(B[m Cancel[17G[17X[43;34H(B[0;7mM-M(B[m Mac Format         [43;65H  (B[0;7mM-P(B[m Prepend[22X[43;100H(B[0;7m^T(B[m Browse[K[41d(B[0;7mFile Name to Write: Jenkinsfile                             